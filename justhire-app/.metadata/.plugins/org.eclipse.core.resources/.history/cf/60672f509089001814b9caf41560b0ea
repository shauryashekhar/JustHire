package com.wissen.justhire.repository;

import java.util.List;
import java.util.Optional;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import com.wissen.justhire.model.Candidate;
import com.wissen.justhire.model.Question;
import com.wissen.justhire.model.Round;

public interface QuestionRepository extends JpaRepository<Question, Integer> {

	List<Question> findByDifficulty(String difficulty);

	List<Question> findByisApproved(int approved);

	@Query("update Question q set isApproved=1 where questionId=:questId") // write query
	void approveQuestion(@Param("questId") int id);

	@Query("from Question q where q.difficulty=:difficulty And q.round=:round And experience=:experience "
			+ "And isApproved=1") // write
	Optional<Question> findNext(@Param("difficulty") String difficulty, @Param("round") Round round,
			@Param("experience") String experience);

	@Query("update Question q set q.comment=:comment, q.difficulty=:difficulty, q.experience=:experience, q.isApproved=:0, q.question=:question, q.round=round where q.questionId=:questionId ") // write query
	void editQuestion(@Param("comment") String comment ,@Param("difficulty") String difficulty, @Param("round") Round round, @Param("experience") String experience, @Param("question") String question, @Param("questionId") int questionId );

	
	
}
